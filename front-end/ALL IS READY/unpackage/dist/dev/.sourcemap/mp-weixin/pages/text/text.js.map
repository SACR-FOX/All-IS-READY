{"version":3,"sources":["uni-app:///main.js","webpack:///D:/SACR-APP/front-end/ALL IS READY/pages/text/text.vue?9f14","webpack:///D:/SACR-APP/front-end/ALL IS READY/pages/text/text.vue?11d6","webpack:///D:/SACR-APP/front-end/ALL IS READY/pages/text/text.vue?0bc1","webpack:///D:/SACR-APP/front-end/ALL IS READY/pages/text/text.vue?607c","uni-app:///pages/text/text.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,0F,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;;;AAGnD;AACsK;AACtK,gBAAgB,6KAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAgnB,CAAgB,8mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACUpoB;AACA,gBADA;AAEA,MAFA,kBAEA;AACA;AACA,eADA;AAEA,gBAFA,EAEA;AACA,gBAHA,EAGA;;AAEA,iBALA,EAKA;AACA,oBANA,EAMA;AACA,iBAPA,EAOA;AACA,gBARA,EAQA;;AAEA,sEAVA,EAUA;AACA,8CAXA,EAWA;AACA,sEAZA,EAYA;AACA,qEAbA,EAaA;;AAEA,oBAfA,EAeA;;AAEA,wBAjBA;AAkBA,2BAlBA;AAmBA,gCAnBA;;AAqBA,UArBA,CAqBA;AArBA;;AAwBA,GA3BA;;AA6BA,QA7BA,oBA6BA;AACA,kBADA,GACA,KADA;;AAGA;AAHA,uCAIA,qBAJA,QAIA,gBAJA;;;AAOA;AACA;AACA;;AAEA,eAXA,GAWA,MAXA;;AAaA;;;;AAIA;AAjBA,uCAkBA,iCAlBA,QAkBA,aAlBA;AAmBA,iDAnBA,UAmBA,aAnBA;;AAqBA,gDArBA,UAqBA,YArBA;;AAuBA;;;;AAIA;AACA,2DA5BA,CA4BA;AACA,mDA7BA,CA6BA;;;;AAIA;;AAEA;AACA,2DADA;AAEA;AACA;AACA;;AAEA,mEAFA,CAEA;;AAEA;;AAEA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA,6CADA;AAEA,gCAFA;AAGA,uDAHA;AAIA,yCAJA;AAKA,qCALA;AAMA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAhBA;;AAkBA,mBAnBA;AAoBA,iBA3GA,EA2GA,IA3GA;AA4GA,eAhHA,MAgHA;AACA;AACA;;;AAGA;AAxJA;;;;AA6JA,GA1LA;AA2LA,SA3LA,qBA2LA;;AAEA,GA7LA;AA8LA;AACA;AACA;AACA,KAHA;;AAKA;AACA;AACA,aAPA,qBAOA,KAPA,EAOA;AACA;AACA;AACA,oBADA;AAEA;AACA;;AAEA,WALA;;AAOA,OARA;AASA,KAjBA;;AAmBA;AACA,iBApBA,2BAoBA;AACA;AACA;AACA;AACA;AACA,WAHA;;AAKA,OANA;AAOA,KA5BA;;AA8BA,eA9BA,uBA8BA,GA9BA,EA8BA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA,4CADA,CACA;;AAEA;AACA;;AAEA,KAxCA,EA9LA,E","file":"pages/text/text.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/text/text.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./text.vue?vue&type=template&id=2f1fd926&\"\nvar renderjs\nimport script from \"./text.vue?vue&type=script&lang=js&\"\nexport * from \"./text.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/text/text.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./text.vue?vue&type=template&id=2f1fd926&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./text.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./text.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\">\r\n\t\t<view style=\"height: 200px;\"></view>\r\n\t\t<canvas :style=\"{width: canvasW + 'px', height: 460 + 'rpx'}\"  canvas-id=\"firstCanvas\" id=\"firstCanvas\" ></canvas>\r\n\t</view>\r\n</template>\r\n\r\n\r\n<script>\r\n\t\r\n\texport default {\r\n\t\tcomponents: {},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tsrc : null,\r\n\t\t\t\tcanvasW:0, // 画布宽\r\n\t\t\t\tcanvasH:0, // 画布高\r\n\t\t\t\t\r\n\t\t\t\tleftImg : {}, //做图\r\n\t\t\t\tprofileImg : {}, //头像\r\n\t\t\t\tlogoImg : {}, //商大logo\r\n\t\t\t\tqrImag : {}, //二维码\r\n\t\t\t\t\r\n\t\t\t\tleftImgSrc : 'https://s2.loli.net/2022/04/24/e4qk2aD6Hj3RmBT.jpg', //做图\r\n\t\t\t\tprofileImgSrc : '../../static/avatar.jpg', //头像\r\n\t\t\t\tlogoImgSrc : 'https://s2.loli.net/2022/04/24/uGFO6zTxnAY39pE.png', //商大logo\r\n\t\t\t\tqrImagSrc : 'https://s2.loli.net/2022/04/20/Od26AZyTq9LtNcb.jpg', //二维码\r\n\t\t\t\t\r\n\t\t\t\tSystemInfo : {}, //设备信息\r\n\t\t\t\t\r\n\t\t\t\tlineOne : '忆往昔，墨湖畔',\r\n\t\t\t\tlineTwo : '湖光柳影  潋滟水波',\r\n\t\t\t\tlineThree : '倒映出你最  美的青春年华',\r\n\t\t\t\t\r\n\t\t\t\tw : 0 //px 转 rpx 转换率\r\n\t\t\t\t\r\n\t\t\t};\r\n\t\t},\r\n\t\t\r\n\t\tasync onLoad(){\r\n\t\t\tlet that = this\r\n\t\t\t\r\n\t\t\t//获取设备信息\r\n\t\t\tthis.SystemInfo = await this.getSystemInfo();\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t//获取W rpx*w = px\r\n\t\t\tthis.w = this.SystemInfo.windowWidth/750\r\n\t\t\tconsole.log(this.w)\r\n\t\t\t\r\n\t\t\tlet w = that.w\r\n\t\t\t\r\n\t\t\t// :style=\"{'height': canvasW*w},{'weight':canvasH*w}\"\r\n\t\t\t\r\n\t\r\n\t\t\t\r\n\t\t\t//获取图片缓存\r\n\t\t\tthis.leftImg = await this.ImageInfo(this.leftImgSrc)\r\n\t\t\tthis.logoImg = await this.ImageInfo(this.logoImgSrc)\r\n\t\t\t// this.profileImg = await this.ImageInfo(this.profileImgSrc)\r\n\t\t\tthis.qrImag = await this.ImageInfo(this.qrImagSrc)\r\n\t\t\t \r\n\t\t\t/*\r\n\t\t\t...\r\n\t\t\t*/\r\n\t\t   \r\n\t\t   //获取画布宽高\r\n\t\t    this.canvasW = this.SystemInfo.windowWidth; // 画布宽度\r\n\t\t    this.canvasH = this.leftImg.height //画布高度，依照左图高度\r\n\t\t\t\r\n\r\n\t\t\t\r\n\t\t\tconsole.log(200*w)\r\n\t\t   \r\n\t\t    if(this.leftImg.errMsg == 'getImageInfo:ok'  \r\n\t\t\t   && this.SystemInfo.errMsg == 'getSystemInfo:ok'\r\n\t\t\t    ){\r\n\t\t\t    console.log('ok')\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar ctx = uni.createCanvasContext(\"firstCanvas\") //引号里自定义\r\n\t\t\t\t\t\r\n\t\t\t\t\tctx.weight = 0\r\n\t\t\t\t\t\r\n\t\t\t\t\tctx.setFillStyle(\"#f9f9f9\")\r\n\t\t\t\t\tctx.fillRect(0,0,that.canvasW,460*w)\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t//左图设置\r\n\t\t\t\t\tctx.drawImage(that.leftImg.path,0,0,450*w,460*w)\r\n\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t// //渐变\r\n\t\t\t\t\t// const grd = ctx.createLinearGradient(0, 0, 420*w, 0)\r\n\t\t\t\t\t// grd.addColorStop(0,'rgba(255,255,255,0)')\r\n\t\t\t\t\t// grd.addColorStop(1,'rgba(255,255,255,1)')\r\n\t\t\t\t\t// ctx.setFillStyle(grd)\r\n\t\t\t\t\t// ctx.fillRect(0,0,450*w,480*w)\r\n\t\t\t\t\t\r\n\t\t\t\t\t//logo\r\n\t\t\t\t\tctx.drawImage(that.logoImg.path,450*w,0,(that.canvasW-450*w),90*w)\r\n\t\t\t\t\t//To:\r\n\t\t\t\t\tctx.setFontSize(18)\r\n\t\t\t\t\tctx.setFillStyle('#333');\r\n\t\t\t\t\tctx.fillText('To:',460*w,140*w)\r\n\t\t\t\t\t//from\r\n\t\t\t\t\tctx.setFontSize(11)\r\n\t\t\t\t\tctx.setFillStyle('#000000');\r\n\t\t\t\t\tctx.fillText(\"From:\",460*w,420*w)\r\n\t\t\t\t\tctx.fillText(\"浙江工商大学校友会\",460*w,450*w)\r\n\t\t\t\t\t//QR\r\n\t\t\t\t\tctx.drawImage(that.qrImag.path,(that.canvasW - 90*w),(460*w - 90*w),90*w,90*w)\r\n\t\t\t\t\t//邮编\r\n\t\t\t\t\tctx.setStrokeStyle('#ffffff')\r\n\t\t\t\t\tctx.strokeRect(20*w,20*w,25*w,25*w)\r\n\t\t\t\t\tctx.strokeRect(55*w,20*w,25*w,25*w)\r\n\t\t\t\t\tctx.strokeRect(90*w,20*w,25*w,25*w)\r\n\t\t\t\t\tctx.strokeRect(125*w,20*w,25*w,25*w)\r\n\t\t\t\t\tctx.strokeRect(160*w,20*w,25*w,25*w)\r\n\t\t\t\t\tctx.strokeRect(195*w,20*w,25*w,25*w)\r\n\r\n\t\t\t\t\t//头像\r\n\t\t\t\t\t//蒙版\r\n\t\t\t\t\tctx.save()\r\n\t\t\t\t\tctx.beginPath()\r\n\t\t\t\t\tctx.arc(603*w,148*w,38*w,0,2 * Math.PI)\r\n\t\t\t\t\tctx.clip()\r\n\t\t\t\t\tctx.drawImage(that.profileImgSrc,565*w,110*w,76*w,76*w)\r\n\t\t\t\t\tctx.restore()\r\n\t\t\t\t\t\r\n\t\t\t\t\t// ctx.arc(603*w,153*w,91.65/2*w,0,2 * Math.PI )\r\n\t\t\t\t\t// ctx.setFillStyle('#ee000b')\r\n\t\t\t\t\t// ctx.fill()\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t//(730+480)*w/2 - that.lineOne.length*20*w\r\n\t\t\t\t\t//诗\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.log((730+480)*w/2 - that.lineOne.length*20*w)\r\n\t\t\t\t\t\r\n\t\t\t\t\tctx.setFontSize(19*w)\r\n\t\t\t\t\tctx.setFillStyle('#3a3a3a');\r\n\t\t\t\t\tconsole.log(that.lineOne.length)\r\n\t\t\t\t\t//ctx.fillText(that.lineOne,(730+480)*w/2 - ((that.lineOne.length-that.getBlockNum(that.lineOne))+(that.getBlockNum(that.lineOne)/2))/2*19*w,233*w)\r\n\t\t\t\t\tctx.fillText(that.lineOne,(730+480)*w/2 - ((that.lineOne.length-that.getBlockNum(that.lineOne))+(that.getBlockNum(that.lineOne)/2))/2*19*w,233*w)\r\n\t\t\t\t\tctx.fillText(that.lineTwo,(730+480)*w/2 - ((that.lineTwo.length-that.getBlockNum(that.lineTwo))+(that.getBlockNum(that.lineTwo)/2))/2*19*w,278*w)\r\n\t\t\t\t\t\r\n\t\t\t\t\tctx.fillText(that.lineThree,(730+480)*w/2 - ((that.lineThree.length-that.getBlockNum(that.lineThree))+(that.getBlockNum(that.lineThree)/2))/2*19*w,323*w)\r\n\t\t\t\t\t\r\n\t\t\t\t\t//线\r\n\t\t\t\t\t\r\n\t\t\t\t\tctx.beginPath()\r\n\r\n\t\t\t\t\tctx.moveTo(480*w, 245*w)\r\n\t\t\t\t\tctx.lineTo(730*w, 245*w)\r\n\t\t\t\t\tctx.moveTo(480*w, 290*w)\r\n\t\t\t\t\tctx.lineTo(730*w, 290*w)\r\n\t\t\t\t\tctx.moveTo(480*w, 335*w)\r\n\t\t\t\t\tctx.lineTo(730*w, 335*w)\r\n\t\t\t\t\tctx.setStrokeStyle('#818181')\r\n\t\t\t\t\tctx.stroke()\r\n\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tctx.draw(true,(rej) =>{\r\n\t\t\t\t\t\tuni.canvasToTempFilePath({ // 保存canvas为图片\r\n\t\t\t\t\t\t\tcanvasId:'firstCanvas',\r\n\t\t\t\t\t\t\tquality:1,\r\n\t\t\t\t\t\t\tdestWidth:that.canvasW/(w*w),\r\n\t\t\t\t\t\t\tdestHeight: 460/w,\r\n\t\t\t\t\t\t\tfileType:'jpg',\r\n\t\t\t\t\t\t\tcomplete: (res) => {\r\n\t\t\t\t\t\t\t\tconsole.log(res.tempFilePath)\r\n\t\t\t\t\t\t\t\t//调用这个函数保存到相册\r\n\t\t\t\t\t\t\t\t// uni.saveImageToPhotosAlbum({\r\n\t\t\t\t\t\t\t\t// \tfilePath:res.tempFilePath,\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// \tcomplete: (res) => {\r\n\t\t\t\t\t\t\t\t// \t\tconsole.log(\"success\")\r\n\t\t\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t\t\t// })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t},1000)\r\n\t\t    }else{\r\n\t\t\t    console.log('err')\r\n\t\t    }\r\n\t\t\r\n\t\t\t\r\n\t\t\t// ctx.setFillStyle('#f10040');\r\n\t\t\r\n\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\t\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tcanvasIdErrorCallback: function (e) {\r\n\t\t\t\t\t\tconsole.error(e.detail.errMsg)\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//缓存\r\n\t\t\t// image : 图片地址\r\n\t\t\t ImageInfo(image){\r\n\t\t\t\treturn new Promise((req,rej) =>{\r\n\t\t\t\t\tuni.getImageInfo({\r\n\t\t\t\t\t\tsrc: image,\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\treq(res)\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 获取设备信息\r\n\t\t\tgetSystemInfo(){\r\n\t\t\t\treturn new Promise((req, rej) => {\r\n\t\t\t\t\tuni.getSystemInfo({\r\n\t\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\t\treq(res)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetBlockNum(str){\r\n\t\t\t\tvar strS =  str.match(/ /g)\r\n\t\t\t\tif(strS == null ){\r\n\t\t\t\t\treturn 0\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlet kongge = str.match(/ /g).length // 空格 6\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn kongge\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\t\r\n\t\t\r\n\t\t\r\n\r\n\t};\r\n\t\r\n\t\r\n</script>\r\n\r\n\r\n<style lang=\"scss\">\r\n\t\r\n</style>\r\n\r\n\r\n"],"sourceRoot":""}